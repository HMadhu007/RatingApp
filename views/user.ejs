<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGNIWIS-USER</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
   <script src="../javascripts/user.js"></script>
</head>
<body style="padding: 0px; margin: 0px;z-index: -1;" id="body">
 

  <div class="loader"></div>

  <!-- ********************************User Notification popup****************************** -->
  <!-- ******************************************************************************** -->

  <div style="padding-bottom: 30px;width: 90%;height: 80%;background-color:white;position: absolute;top:10%;left: 5%;display: none;z-index: 2;border-radius: 10px;border: 2px solid black;" id="UserNotificationPopUp">
    
  
    <div style="scroll-behavior: smooth;">
      <div style="border-radius: 10px;border-radius: 10px;padding: 6px 0px 0px 0px;" class="table-responsive">
        <table border='1' style="text-align: center;"  class="table table-bordered" id="userNotificationReviewpopup" >
          <tr style="background-color: rgb(97, 97, 233);" ><th style="color:black;">Employee_Id</th><th  style="color:black;">Requested_Date</th><th>Status</th><th  style="color:black;">Action</th></tr>
          <%
          var aEmployeesData = []
          oReviewEmpData.forEach((data)=>{
            if(session.EmpId == data.User_Id)
            {
  
            }
            else{

              aEmployeesData.push(data)
              
            }
          })
          
          if(aEmployeesData.length >0)
          {
            aEmployeesData.forEach((data)=>{
  
              var dataPresent = false
              oEmp_ReviewStatus.every((reviewData)=>{
                console.log("Inner")
                if(data.User_Id == reviewData.Employee_Id && data.Requested_Date == reviewData.Req_Date && session.Name == reviewData.Rew_name){
                  dataPresent = true
                  console.log("TY")
                  return false
                }
              })

              if (dataPresent){
                console.log("TRUE")
                dataPresent = false
              }else{
                console.log("FALSE")        
              

              
           %>
          <td><%= data.User_Id %></td>
           <td><%= data.Requested_Date %></td>
           <td><%= data.Status %></td>
           <td><a style="border: 1px solid rgb(13, 13, 13);border-radius: 6px;padding:4px 15px;text-decoration: none;"  class="btn btn-sm btn-success"  href="/Employee_review/<%= data.User_Id %>" onclick="onReviewButton()">Accept</a>
           <a style="border: 1px solid rgb(13, 13, 13);border-radius: 6px;padding:4px 15px;text-decoration: none;" class=" ms-2 btn btn-sm btn-danger"  href="" onclick="">Reject</a></td>
           </tr>
           <%

          }
            })
          }
          else
          {
          %>
        <tr>
            <td style="position: relative; left: 35%;">No Data Found</td>
        </tr>
        <%
        }
        %>
        </table>
      </div>
      
    </div>
    <div style="position: fixed;top: 82%;left: 88%;">
      <button onclick="UserNotificationPopUp()" style="background-color: red;padding: 3px 15px 3px 15px;border-radius: 5px;border-color: rgba(207, 207, 207, 0.687);">Close</button>
    </div>
  </div>
   <div id="bodyContainer">

  
  <!-- <div style="width: 100%;height: 200vh;background-color: #242524b4; position: absolute; display: none;z-index: 1;" id="popupBackground"></div> -->
  <!-- ******************************* header part************************************* -->
  <!-- ******************************************************************************** -->
  
     <!-- <div style="display: flex; align-items: center; justify-content: space-between; margin: 0px;padding: 0px;">
        <div>
          <img src="../images/images.png" alt="" height="80px" style="margin-left: 10px;">
        </div>
        <div >
          <h2 style="color:rgb(34, 155, 199) ;">--SIGNIWIS RATING WEBSITE--</h2>
        </div>
        
          <div style="width: 200px; display: flex; align-items: center; justify-content: flex-start;">
            <div style="display: flex;width: 190px; justify-content: space-between;">
              <img src="../images/notification.png" onclick="UserNotification()" style="margin-left: 55%;" id="UserNotification" alt="User" width="34px" height="30px"/>
              <img src="../images/profile.png" onclick="userProfileinfo()" id="userProfileinfo" alt="User" width="30px" height="30px"/>
              <a href="./home"><img src="../images/logout-8-512.png" alt="Logout" id="ologout" width="30px" height="30px"/></a>
          </div>
        </div>
      </div> -->


      <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="/user">
          <img src="../images/logo.jpg" alt="" height="90px" width="150px" style="margin-left: 10px;">
            
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!-- <div class="row"> -->
              <div class="col-md-10" >
                <div class="row">
                  <div class="col-md-2"></div>
                  <div class="col-md-8">
                <h2 id="orgTitle" style="color:rgb(34, 155, 199) ;">--SIGNIWIS TECHNOLOGIES--</h2>
  
                  </div>
                  <div class="col-md-2"></div>
                </div>
  
              </div>
              <div class="col-md-2">
                <div style="display: flex; align-items: center; justify-content: space-evenly;">
                  <div style="display: flex; justify-content: space-between; gap: 8px;">
                    <img src="../images/notification.png" onclick="UserNotification()"  id="UserNotification" alt="User" width="34px" height="30px"/> 
                    <a href="./home"><img src="../images/logout-8-512.png" alt="Logout" id="ologout" width="30px" height="30px"/></a>
                </div>
              </div>
              </div>
              <!-- </div> -->
            </div>
          </div>
        </div>
      </nav>



  <!-- **********************************User Info************************************* -->
  <!-- ********************************************************************************* -->
  <!-- display:none; -->
  <div id="infoPopUp" style=" margin-right: 8px;margin-top: -10px;position:absolute;top:75px;right:30px;display:none">
  <div style="background-color: white; width: max-content;border-radius: 10px;padding-bottom:10px ;box-shadow: 0px 0px 5px 1px;">
    <div style="display: flex;justify-content: flex-end;">
      <svg xmlns="http://www.w3.org/2000/svg" id="oclosepopup" width="20" height="20" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16" onclick="oCloseuserInfoPopup()" style="background-color:#EAE7DC;border-radius:45%;display: flex;align-items: center;justify-content: end;">
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
      </svg>
    </div>
    
    <div id="innerwelcome" style="padding: 10px 20px 20px 20px;">
          <p id="EmployeeId">Employee_Id : <%= session.EmpId  %> </p>
          <p>Name : <%= session.Name  %></p>
          <p>Department : <%= session.Dept  %></p>
          <p>Email : <%= session.Email  %></p>

    </div>
        
          
    </div>
  
   
</div>
  
    <div class="row m-0">

      <div class="col-md-1">
        
      </div>
      <div class="col-md-8">
          <div class="row " id="tUserInfo" style="background-color: rgba(211, 213, 213, 0.639);border: 1px solid black;border-radius: 6px;padding: 18px 25px;width: inherit;">
            <div class="col-md-4">
              <img width="140px" height="170px" src="https://icons.veryicon.com/png/o/internet--web/prejudice/user-128.png"/>
            </div>
            <div class="col-md-7">
              <h2 style="font-weight: bold;letter-spacing: 2px;"><%= session.Name  %></h2>
              <p >Employee_Id : <%= session.EmpId  %> </p>
              <p>Department : <%= session.Dept  %> Consultant</p>
              <p>Email : <%= session.Email  %></p>
              <% oEmp_Data.forEach((element,index)=>{
                if(element.Employee_Id == session.EmpId){ 
                  %>
                  <p>No.of Mock Taken: <%= element.Employee_Mock_Taken %> </p>
                  <p>No.of Mock Given: <%= element.Employee_Mock_Given %> </p>
                  <%
                }
              }) %>
              </div>
              <!-- <div id="adminNotification" style="position: absolute; top: 70%;left: 45%;">
                <% if(message.length > 0){  %>
                  <div class="alert alert-success" id="alert" style="margin-top: 10px;width:250px; margin: 50px auto;text-align: center;" role="alert">
                    <%= message %>
                  </div>
                
                <% } %>
              </div> -->
          </div>
      </div>
      <div class="col-md-3">

      </div>

    </div>

    <div id="adminNotification" >
                <% if(message.length > 0){  %>
                  <div class="alert alert-success" id="alert" style="margin-top: 10px;width:250px; margin: 50px auto;text-align: center;" role="alert">
                    <%= message %>
                  </div>
                
                <% } %>
    </div>
   <script>
    function onReviewButton(){
      document.getElementById("bodyContainer").style.filter = 'blur(0px)'
    document.getElementById("UserNotificationPopUp").style.display="none"
    }
   </script>
   <script>

    function AdminNotificationHide(){
        debugger
        var oContainer = document.getElementById('adminNotification');
        setTimeout(()=>{
            oContainer.style.display='none'
        },5000)
    }
    AdminNotificationHide();

    window.addEventListener("load", () => {
  const loader = document.querySelector(".loader");

  loader.classList.add("loader--hidden");

  loader.addEventListener("transitionend", () => {
    document.body.removeChild(loader);
  });
});
  
    </script>
</body>
</html>